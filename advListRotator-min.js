if(typeof Object.create!=="function"){Object.create=function(b){function a(){}a.prototype=b;return new a()}}(function(a){a.fn.extend({advListRotator:function(b){if(this.length){return this.each(function(){var c=Object.create(AdvancedListRotatorClass);c.init(this,b);a.data(this,"advListRotator",AdvancedListRotatorClass)})}return false}})})(jQuery);var AdvancedListRotatorClass={init:function(b,a){var d=this;d.settings=jQuery.extend({rotationInterval:5000,effectTimer:1000,effect:false,effectOptions:{},itemControl:{},shuffle:false,randomStart:false,autoStart:true,disableRotationEngine:false,helper:false,activeItemClass:"alrActiveItem",helperActiveItemClass:"alrHelperActiveItem",helperInteraction:"mouseover",startIndex:0,nextItemElement:false,nextItemElementInteraction:"click",previousItemElement:false,previousItemElementInteraction:"click",randomEffect:false,randomEffects:new Array("blind","clip","explode","fade","fold"),debug:false,debugLevel:new Array("debug","info","warn","error")},d.settings,a);d.effectOptions=jQuery.extend({},d.effectOptions,d.settings.effectOptions);d.itemControl=jQuery.extend({},d.itemControl,d.settings.itemControl);d.listRotator=b;d.$listRotator=jQuery(b);d.totalItems=d.$listRotator.find("li").length;d.currentItem=(d.settings.startIndex>=0&&d.settings.startIndex<d.totalItems)?d.settings.startIndex:0;d.currentEffect=false;d.shuffledItems=new Array();d.tId=null;d.userInteraction=false;d.calculateNextItem=true;d.animationRunning=false;if(d.settings.randomStart){d.currentItem=d.random(d.totalItems)}d.shuffledItems.push(d.currentItem);d.previousItem=d.currentItem;if(d.settings.debug&&d.in_array("debug",d.settings.debugLevel)){console.debug("init: totalItems: "+d.totalItems);console.debug("init: startIndex: "+d.currentItem);if(d.settings.shuffle){console.debug("init: Pushed "+d.currentItem+" into shufflelist")}}d.$listRotator.children().each(function(c){if(c==d.currentItem){if(d.settings.effect=="slide"){var e="-"+d.currentItem*d.effectOptions.slideBy;d.$listRotator.css("left",e)}jQuery(this).show();jQuery(this).addClass(d.settings.activeItemClass);d.setHelperClass(d,c,true)}});if(jQuery(d.settings.helper).length>0){jQuery(d.settings.helper).children().each(function(){jQuery(this).bind(d.settings.helperInteraction,function(){d.userInteraction=true;d.stopRotationEngine(d);d.currentEffect=d.getItemEffect(d);if(d.currentEffect!="slide"&&d.currentEffect!==false){d.$listRotator.children().hide()}d.$listRotator.children().removeClass(d.settings.activeItemClass);jQuery(d.settings.helper).children().removeClass(d.settings.helperActiveItemClass);d.currentItem=jQuery(this).index();d.$listRotator.children().each(function(c){if(c==d.currentItem){jQuery(this).stop();jQuery(this).css("opacity",1);jQuery(this).show();if(d.settings.effect=="slide"){d.runEffect(d,jQuery(this),false)}jQuery(this).addClass(d.settings.activeItemClass);d.setHelperClass(d,c,true);return false}return true})});jQuery(this).bind("mouseout",function(){d.startRotationEngine(d)})})}if(jQuery(d.settings.nextItemElement).length>0){jQuery(d.settings.nextItemElement).bind(d.settings.nextItemElementInteraction,function(){d.moveToNextItem(d)})}if(jQuery(d.settings.previousItemElement).length>0){jQuery(d.settings.previousItemElement).bind(d.settings.previousItemElementInteraction,function(){d.moveToPreviousItem(d)})}if(d.settings.autoStart){d.startRotationEngine(d)}},rotationEngine:function(a){a.stopRotationEngine(a);a.userInteraction=false;a.$listRotator.children().each(function(c){if(c==a.currentItem){if(a.calculateNextItem){if(a.settings.shuffle){a.currentItem=a.shuffleRotationEngine(a,a.totalItems)}else{a.currentItem++;a.currentItem=(a.currentItem>=a.totalItems)?0:a.currentItem}}else{if(a.settings.shuffle){if(a.shuffledItems.length>=1){for(var b=0;b<a.shuffledItems.length;b++){if(a.shuffledItems[b]==a.previousItem){do{b--;a.previousItem=(b<0)?a.shuffleRotationEngine(a,a.totalItems):a.shuffledItems[b]}while(a.currentItem==a.previousItem);break}}}else{a.previousItem=a.shuffleRotationEngine(a,a.totalItems)}a.currentItem=a.previousItem}else{a.currentItem--;a.currentItem=(a.currentItem<0)?(a.totalItems-1):a.currentItem}}a.$listRotator.children().each(function(d){if(d==a.currentItem){jQuery(this).show();a.setHelperClass(a,d,true);a.setHelperClass(a,c,false);return false}return true});a.calculateNextItem=true;a.runEffect(a,jQuery(this),true);return false}return true})},continueRotation:function(d,b,a){if(!d.userInteraction){if(a&&d.currentEffect){b.hide()}b.removeClass(d.settings.activeItemClass);d.$listRotator.children().each(function(c){if(c==d.currentItem){jQuery(this).addClass(d.settings.activeItemClass);return false}return true});this.startRotationEngine(d)}},runEffect:function(f,b,a){f.animationRunning=true;f.currentEffect=f.getItemEffect(f);if(f.currentEffect=="slide"){var d="-"+f.currentItem*f.effectOptions.slideBy;f.$listRotator.animate({left:d},f.getItemEffectTimer(f),"swing",function(){f.animationRunning=false;if(a){f.continueRotation(f,b,false)}})}else{if(b.effect&&f.currentEffect!="fade"&&f.currentEffect!==false){b.effect(f.currentEffect,f.getItemEffectOptions(f),f.getItemEffectTimer(f),function(){f.animationRunning=false;if(a){f.continueRotation(f,b,true)}})}else{if(f.currentEffect=="fade"){b.fadeOut(f.getItemEffectTimer(f),function(){f.animationRunning=false;if(a){f.continueRotation(f,b,true)}})}else{if(f.settings.debug){if(f.currentEffect!==false){console.debug("runEffect: Missing jQuery UI effects; Cannot run "+f.currentEffect+"; Using none")}}f.animationRunning=false;if(a){f.continueRotation(f,b,true)}}}}},stopRotationEngine:function(a){if(a.tId){clearInterval(a.tId);a.tId=null;if(a.settings.debug&&a.in_array("info",a.settings.debugLevel)){console.info("stopRotationEngine: Rotation Engine stopped")}}},startRotationEngine:function(b){b.stopRotationEngine(b);if(!b.settings.disableRotationEngine){var a=b.getItemRotationInterval(b);b.tId=setInterval(function(){b.rotationEngine(b)},a);if(b.settings.debug&&b.in_array("info",b.settings.debugLevel)){console.info("startRotationEngine: Rotation Engine started; interval "+a+"; currentItem "+b.currentItem)}}},shuffleRotationEngine:function(d,a){var b=d.random(a);while(d.in_array(b,d.shuffledItems)||b==d.previousItem){b=d.random(a)}d.previousItem=b;d.shuffledItems.push(b);if(d.shuffledItems.length==d.totalItems){d.shuffledItems=new Array()}if(d.settings.debug&&d.in_array("debug",d.settings.debugLevel)){console.debug("shuffleRotationEngine: Number "+b+" generated");if(d.shuffledItems.length<=0){console.debug("shuffleRotationEngine: Shufflelist was reset")}}return b},in_array:function(b,a){for(n in a){if(a[n]==b){return true}}return false},random:function(a){return Math.floor(Math.random()*a)},setHelperClass:function(d,b,a){if(jQuery(d.settings.helper).length>0){jQuery(d.settings.helper).children().each(function(c){if(c==b){if(a){jQuery(this).addClass(d.settings.helperActiveItemClass)}else{jQuery(this).removeClass(d.settings.helperActiveItemClass)}return false}return true})}return false},moveToNextItem:function(a){if(!a.animationRunning){a.userInteraction=true;a.rotationEngine(a)}},moveToPreviousItem:function(a){if(!a.animationRunning){a.userInteraction=true;a.calculateNextItem=false;a.rotationEngine(a)}},getItemObj:function(c){var obj=eval("c.itemControl.listIndex_"+c.currentItem);return(typeof(obj)=="undefined")?false:obj},getItemEffect:function(b){var a=b.getItemObj(b);if(a!==false){if(typeof(a.randomEffect)!="undefined"&&a.randomEffect){return b.getRandomItemEffect(b,a)}else{if(typeof(a.effect)!="undefined"){if(b.settings.debug){console.debug("getItemEffect: itemControl effect found; Using "+a.effect+" for item "+b.currentItem)}return a.effect}}}return b.getRandomEffect(b)},getItemEffectTimer:function(b){var a=b.getItemObj(b);if(a!==false){return(typeof(a.effectTimer)=="undefined")?b.settings.effectTimer:a.effectTimer}return b.settings.effectTimer},getItemEffectOptions:function(b){var a=b.getItemObj(b);if(a!==false){return(typeof(a.effectOptions)=="undefined")?b.effectOptions:jQuery.extend({},b.effectOptions,a.effectOptions)}return b.effectOptions},getItemRotationInterval:function(b){var a=b.getItemObj(b);if(a!==false){return(typeof(a.rotationInterval)=="undefined")?b.settings.rotationInterval:a.rotationInterval}return b.settings.rotationInterval},getRandomEffect:function(d){if(d.settings.randomEffect){var a=d.random(d.settings.randomEffects.length);if(d.settings.debug){console.debug("getRandomEffect: true; Using "+d.settings.randomEffects[a]+" for item "+d.currentItem)}return d.settings.randomEffects[a]}if(d.settings.debug){var b=(d.settings.effect)?d.settings.effect:"none";console.debug("getRandomEffect: false; Using "+b+" for item "+d.currentItem)}return d.settings.effect},getRandomItemEffect:function(d,b){var a;if(typeof(b.randomEffects)!="undefined"){a=d.random(b.randomEffects.length);if(d.settings.debug){console.debug("getRandomItemEffect: found itemControl randomEffects; Using "+b.randomEffects[a]+" for item "+d.currentItem)}return b.randomEffects[a]}a=d.random(d.settings.randomEffects.length);if(d.settings.debug){console.debug("getRandomItemEffect: no itemControl randomEffects, using standard; Using "+d.settings.randomEffects[a]+" for item "+d.currentItem)}return d.settings.randomEffects[a]}};